<mat-stepper orientation="vertical" [linear]="isLinear" #stepper>
  <mat-step [stepControl]="verwandschaftsverhaeltnisse">
    <ng-template matStepLabel>Verwandschaftsverhältnisse</ng-template>
    <section class="example-section" [formGroup]="verwandschaftsverhaeltnisse">
      <p>
        <mat-checkbox formControlName="ehepartner"
          >Ehegatte*in/Eingetragener Partner</mat-checkbox
        >
      </p>
      <p>
        <mat-checkbox formControlName="kinder">Lebensgefährte*in</mat-checkbox>
      </p>
      <p>
        <mat-checkbox formControlName="eltern"
          >Mutter/Vater/Geschwister/Stiefkinder</mat-checkbox
        >
      </p>
      <p>
        <mat-checkbox formControlName="nachkommen">Nachkommen</mat-checkbox>
      </p>
      <p>
        <mat-checkbox formControlName="adoptivkind">Adoptivkinder</mat-checkbox>
      </p>
      <div>
        <button mat-button matStepperPrevious>Zurück</button>
        <button mat-button matStepperNext>Weiter</button>
      </div>
    </section>
  </mat-step>

  @if (verwandschaftsverhaeltnisse.controls.ehepartner.value) {
    <mat-step [stepControl]="ehepartnerStepGroup">
      <form [formGroup]="ehepartnerStepGroup">
        <ng-template matStepLabel>Auschlussgründe</ng-template>
        <h4>Ehepartner*in bereits verstorben?</h4>
        <section class="example-section" [formGroup]="ehepartnerVerstorben">
          <p>
            <mat-checkbox formControlName="verstorbenJa">Ja</mat-checkbox>
          </p>
          <p>
            <mat-checkbox formControlName="verstorbenNein">Nein</mat-checkbox>
          </p>
        </section>

        @if (ehepartnerVerstorben.controls.verstorbenJa.value) {
          <h4>Hat sie Nachkommen?</h4>
          <section class="example-section" [formGroup]="ehepartnerNachkommen">
            <p>
              <mat-checkbox formControlName="nachkommenJa">Ja</mat-checkbox>
            </p>
          </section>

          <h4>Wie viele?</h4>
          <mat-form-field>
            <mat-label>Anzahl</mat-label>
            <input matInput formControlName="nachkommenPartner" />
          </mat-form-field>
        } @else {
          <h4>Erbunwürdig nach §§539, 540, 541 ABGB?</h4>
          <section class="example-section" [formGroup]="erbunwuerdig">
            <p>
              <mat-checkbox formControlName="erbunwuerdigJa">Ja</mat-checkbox>
            </p>
            <p>
              <mat-checkbox formControlName="erbunwuerdigNein"
                >Nein</mat-checkbox
              >
            </p>
          </section>
        }

        <div>
          <button mat-button matStepperPrevious>Zurück</button>
          <button mat-button matStepperNext>Weiter</button>
        </div>
      </form>
    </mat-step>
  }

  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    <p>You are now done.</p>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button (click)="stepper.reset()">Reset</button>
    </div>
  </mat-step>
</mat-stepper>
